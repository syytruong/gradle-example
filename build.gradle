plugins {
	
	id 'war'
}

//copy the embedded servlet into build/server folder
task copyToLib(type: Copy) {
    into "$buildDir/server"
    from(configurations.compile) {
        include "webapp-runner*"
	rename { String fileName ->
		  "jetty-runner.jar"
	}
    }
}


 //stage task is required for deploying to heroku
task stage() {
    dependsOn clean, war, copyToLib
}
war.mustRunAfter clean

dependencies {

	compileOnly 'org.eclipse.jetty:jetty-runner:9.4.9.v20180320'
	providedCompile 'javax.servlet:javax.servlet-api:3.1.0'
	testCompile 'junit:junit:4.12'
}

repositories {
	
	jcenter()
	mavenCentral()
}